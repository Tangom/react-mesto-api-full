{"version":3,"sources":["images/header.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ImagePopup.js","hooks/useFormValidation.js","components/AddPlacePopup.js","components/EditAvatarPopup.js","components/EditProfilePopup.js","utils/api.js","utils/auth.js","components/Register.js","components/Login.js","components/ProtectedRoute.js","images/success.svg","images/fail.svg","components/InfoTooltip.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","email","onClick","menuText","React","useState","isOpened","setIsOpened","className","alt","src","logo","CurrentUserContext","createContext","Card","props","currentUser","useContext","isOwn","card","owner","_id","isLiked","likes","some","i","cardDeleteButtonClassName","cardLikeButtonClassName","onCardDelete","type","onCardClick","link","name","onCardLike","length","Main","onEditAvatar","avatar","about","onEditProfile","onAddPlace","cards","map","Footer","PopupWithForm","isOpen","onClose","title","noValidate","onSubmit","children","buttonName","ImagePopup","useFormValidation","values","setValues","errors","setErrors","isValid","setIsValid","resetForm","useCallback","newValues","newErrors","newIsValid","handleChange","evt","target","value","validationMessage","closest","checkValidity","AddPlacePopup","useEffect","preventDefault","isDisabled","id","maxLength","minLength","placeholder","required","onChange","EditAvatarPopup","onUpdateAvatar","EditProfilePopup","onUpdateUser","api","options","this","_url","url","authorization","localStorage","getItem","fetch","method","headers","setHeaders","then","res","ok","json","Promise","reject","status","data","body","JSON","stringify","item","like","deleteLike","putLikeCard","all","getUser","getInitialCards","auth","password","_handleOriginalResponse","token","Authorization","Register","handleRegistration","history","useHistory","push","to","Login","handleAuthorization","ProtectedRoute","Component","component","loggedIn","InfoTooltip","error","fail","success","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isImagePopupOpen","setIsImagePopupOpen","isInfoTooltipOpen","setIsInfoTooltipOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","isLoading","setIsLoading","setLoggedIn","setError","setEmail","closeAllPopups","handleCheckToken","checkToken","catch","err","console","log","getAllData","profile","finally","Provider","removeItem","exact","path","changeLikeStatus","newCard","newCards","c","deleteCard","filter","authorize","onCheckToken","register","patchProfileEditing","patchUserAvatar","postAddCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","querySelector"],"mappings":"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","file":"static/js/main.9ff1b02f.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/header.c2821b38.svg\";","import React from 'react';\nimport logo from \"../images/header.svg\"\n\nfunction Header({ email, onClick, menuText }) {\n  const [isOpened, setIsOpened] = React.useState(false);\n\n  function toggleMenu() {\n    setIsOpened(!isOpened);\n  }\n\n  return (\n    <>\n      {isOpened && (\n        <nav className={isOpened ? 'header__menu-mobile' : 'header__menu'}>\n          <p className={`header__menu-email ${isOpened && \"header__menu-email_mobile\"}`}>\n            {email}\n          </p>\n          <button onClick={onClick} className=\"header__menu-email header__menu-email_button\">\n            {menuText}\n          </button>\n        </nav>\n      )}\n  <header className=\"header\">\n      <img alt=\"Логотип заголовка\" className=\"header__logo\" src={logo}/>\n      <div className={isOpened ?'header__menu-line header__menu-line_opened' : 'header__menu-line'} onClick={toggleMenu}></div>\n      {!isOpened && (\n        <nav className={isOpened ? 'header__menu__mobile' : 'header__menu'}>\n          <p className={`header__menu-email ${isOpened && \"header__menu-email_mobile\"}`}>\n            {email}\n          </p>\n          <button onClick={onClick} className=\"header__menu-email header__menu-email_button\">\n            {menuText}\n          </button>\n        </nav>\n      )}\n    </header>\n    </>\n  )\n  }\n\nexport default Header;\n","import React from 'react';\r\nexport const CurrentUserContext = React.createContext();","import React from 'react';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\n\nfunction Card(props) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  const isOwn = props.card.owner === currentUser._id;\n  const isLiked = props.card.likes.some(i => i === currentUser._id);\n\n  const cardDeleteButtonClassName = `element__deleted ${!isOwn ? 'element__deleted_disable' : ''}`;\n  const cardLikeButtonClassName = `element__like ${isLiked ? 'element__like_active' : ''}`;\n\n  function handleCardClick() {\n    props.onCardClick(props.card);\n  }\n\n  function handleLikeClick() {\n    props.onCardLike(props.card)\n  }\n\n  function handleCardDelete() {\n    props.onCardDelete(props.card)\n  }\n\n  return (\n    <div className=\"element\">\n      <button className={cardDeleteButtonClassName} onClick={handleCardDelete} type=\"button\"></button>\n      <img className=\"element__image\" onClick={handleCardClick} src={props.card.link} alt={props.card.name}/>\n      <div className=\"element__content\">\n        <h2 className=\"element__text\">{props.card.name}</h2>\n        <div className=\"element__content-like\">\n          <button className={cardLikeButtonClassName} onClick={handleLikeClick} type=\"button\"></button>\n          <p className=\"element__result\">{props.card.likes.length}</p>\n          </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Card;\n","import React from 'react';\r\nimport Card from './Card';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Main(props) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n    return (\r\n    <main className=\"content\">\r\n      <section className=\"profile\">\r\n        <button className=\"profile__avatar-image\" onClick={props.onEditAvatar} type=\"button\">\r\n          <img alt=\"Портрет\" className=\"profile__avatar\" src={currentUser.avatar}/>\r\n        </button>\r\n        <div className=\"profile__input\">\r\n          <div className=\"profile__text\">\r\n            <h1 className=\"profile__name-field\">{currentUser.name}</h1>\r\n            <p className=\"profile__career-field\">{currentUser.about}</p>\r\n          </div>\r\n          <button className=\"profile__edit\" onClick={props.onEditProfile} type=\"button\">\r\n          </button>\r\n        </div>\r\n        <button className=\"profile__add-image\" onClick={props.onAddPlace} type=\"button\">\r\n        </button>\r\n      </section>\r\n\r\n      <section className=\"elements\">\r\n        {props.cards.map(card =>(\r\n          <Card\r\n            key={card._id}\r\n            card={card}\r\n            onCardClick={props.onCardClick}\r\n            onCardLike={props.onCardLike}\r\n            onCardDelete={props.onCardDelete}\r\n          />\r\n          )\r\n        )}\r\n      </section>\r\n    </main>\r\n  )\r\n}\r\n\r\nexport default Main;\r\n","function Footer() {\r\n  return (\r\n    <footer className=\"footer\">\r\n      <p className=\"footer__copyright\">© Александр Чигарев</p>\r\n    </footer>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","function PopupWithForm(props) {\r\n\r\n    return (\r\n    <div className={`popup ${props.isOpen ? \"popup_opened\" : \"\"}`}>\r\n      <div className=\"popup__container\">\r\n        <button onClick={props.onClose} type=\"button\" className={`popup__close popup__close_${props.name}`}></button>\r\n        <h2 className=\"popup__title\">{props.title}</h2>\r\n        <form className={`popup__form popup__form_${props.name}`} name=\"popup__form\" noValidate onSubmit={props.onSubmit}>\r\n          <fieldset className=\"popup__form-set\">\r\n            {props.children}\r\n            <button className=\"popup__save\" type=\"submit\">{props.buttonName}</button>\r\n          </fieldset>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PopupWithForm;\r\n","import React from 'react';\r\n\r\nfunction ImagePopup(props) {\r\n  return (\r\n    <div className={`popup popup_photo ${props.isOpen && 'popup_opened'}`}>\r\n      <div className=\"popup__container popup__container_photo\">\r\n        <button onClick={props.onClose} className=\"popup__close popup__close_image\" type=\"button\"></button>\r\n        <img alt={`${props.card.name}`} src={`${props.card.link}`} className=\"popup__image\"/>\r\n        <h2 className=\"popup__text\">{props.card.name}</h2>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ImagePopup;\r\n","import React from 'react';\n\nexport function useFormValidation() {\n    const [values, setValues] = React.useState({});\n    const [errors, setErrors] = React.useState({});\n    const [isValid, setIsValid] = React.useState(false);\n\n    const handleChange = (evt) => {\n        const target = evt.target;\n        const name = target.name;\n        const value = target.value;\n        setValues({ ...values, [name]: value });\n        setErrors({ ...errors, [name]: target.validationMessage });\n        setIsValid(target.closest('.popup__form').checkValidity());\n    }\n\n    /* установка значений полей по умолчанию / очистка полей */\n    const resetForm = React.useCallback(\n        (newValues = {}, newErrors = {}, newIsValid = false) => {\n            setValues(newValues);\n            setErrors(newErrors);\n            setIsValid(newIsValid);\n        }, [setValues, setErrors, setIsValid]\n    );\n\n    return { values, errors, isValid, handleChange, resetForm };\n}\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport {useFormValidation} from \"../hooks/useFormValidation\";\r\n\r\nfunction AddPlacePopup(props) {\r\n  const {values, errors, isValid, handleChange, resetForm,} = useFormValidation();\r\n\r\n  React.useEffect(() => {\r\n    resetForm();\r\n  }, [props.isOpen, resetForm]);\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    props.onAddPlace(values);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name='card'\r\n      title='Новое место'\r\n      buttonName='Создать'\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      isDisabled={!isValid}\r\n    >\r\n      <input className=\"popup__field popup__field_place\" id='place-input' maxLength=\"30\" minLength=\"1\"\r\n             name=\"name\"\r\n             placeholder=\"Название\" required type=\"text\" onChange={handleChange} value={values.name || \"\"}/>\r\n      <span className='popup__form-error' id='place-input-error'>{errors.name}</span>\r\n      <input className=\"popup__field popup__field_link\" id='link-input' name=\"link\"\r\n             placeholder=\"Ссылка на картинку\"\r\n             required type=\"url\" onChange={handleChange} value={values.link || \"\"}/>\r\n      <span className='popup__form-error' id='link-input-error'>{errors.link}</span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default AddPlacePopup;\r\n","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport {useFormValidation} from \"../hooks/useFormValidation\";\r\n\r\nfunction EditAvatarPopup(props) {\r\n\r\n  const {values, isValid, handleChange, resetForm} = useFormValidation();\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    props.onUpdateAvatar(values);\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    resetForm();\r\n  }, [props.isOpen, resetForm])\r\n\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name='avatar'\r\n      title='Обновить аватар'\r\n      buttonName='Сохранить'\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      isDisabled={!isValid}\r\n    >\r\n      <input className=\"popup__field popup__field_link\" id='link-avatar-input' name=\"avatar\"\r\n             placeholder=\"Ссылка на картинку\"\r\n             required type=\"url\" value={values.avatar || ''} onChange={handleChange}/>\r\n      <span className='popup__form-error' id='link-avatar-input-error'></span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\r\nimport {useFormValidation} from \"../hooks/useFormValidation\";\r\n\r\nfunction EditProfilePopup(props) {\r\n  const {values, errors, isValid, handleChange, resetForm} = useFormValidation();\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  React.useEffect(() => {\r\n    if (currentUser) {\r\n      resetForm(currentUser);\r\n    }\r\n  }, [currentUser, resetForm, props.isOpen]);\r\n\r\n  function handleSubmit(evt) {\r\n    evt.preventDefault();\r\n    props.onUpdateUser(values);\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name='profile'\r\n      title='Редактировать профиль'\r\n      buttonName='Сохранить'\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n      isDisabled={!isValid}\r\n    >\r\n      <input className=\"popup__field popup__field_name\" id='name-input' maxLength=\"40\" minLength=\"2\" name=\"name\"\r\n             placeholder=\"Имя\" required type=\"text\" value={values.name || ''} onChange={handleChange}/>\r\n      <span className='popup__form-error' id='name-input-error'>{errors.name}</span>\r\n      <input className=\"popup__field popup__field_career\" id='career-input' maxLength=\"200\" minLength=\"2\"\r\n             name=\"about\"\r\n             placeholder=\"О себе\" required type=\"text\" value={values.about || ''} onChange={handleChange}/>\r\n      <span className='popup__form-error' id='career-input-error'>{errors.about}</span>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup;"," class Api {\r\n  constructor(options) {\r\n    this._url = options.url;\r\n     }\r\n\r\n   setHeaders() {\r\n     return {\r\n       authorization: `Bearer ${localStorage.getItem(\"jwt\")}`,\r\n       \"Content-Type\": \"application/json\",\r\n     };\r\n   }\r\n\r\n  getUser() {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'GET',\r\n      headers: this.setHeaders(),\r\n    })\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        // если ошибка, отклоняем промис\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n      })\r\n  }\r\n\r\n  getInitialCards() {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: 'GET',\r\n      headers: this.setHeaders(),\r\n    })\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n      })\r\n  }\r\n\r\n  patchProfileEditing(data) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'PATCH',\r\n      headers: this.setHeaders(),\r\n      body: JSON.stringify({\r\n        name: data.name,\r\n        about: data.about\r\n      })\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n  }\r\n\r\n  patchUserAvatar(data) {\r\n    return fetch(`${this._url}/users/me/avatar`, {\r\n      method: 'PATCH',\r\n      headers: this.setHeaders(),\r\n      body: JSON.stringify({\r\n        avatar: data.avatar\r\n      })\r\n    }).then((res) => {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Ошибка: ${res.status}`);\r\n    })\r\n  }\r\n\r\n  postAddCard(item) {\r\n    return fetch(`${this._url}/cards`, {\r\n      method: 'POST',\r\n      headers: this.setHeaders(),\r\n      body: JSON.stringify({\r\n        name: item.name,\r\n        link: item.link\r\n      })\r\n    })\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n      })\r\n  }\r\n\r\n  deleteCard(data) {\r\n    return fetch(`${this._url}/cards/${data._id}`, {\r\n      method: 'DELETE',\r\n      headers: this.setHeaders(),\r\n    })\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n      })\r\n  }\r\n\r\n   changeLikeStatus(data, like) {\r\n     if (like) {\r\n       return this.deleteLike(data);\r\n     } else {\r\n       return this.putLikeCard(data);\r\n     }\r\n   }\r\n\r\n   deleteLike(data) {\r\n    return fetch(`${this._url}/cards/likes/${data._id}`, {\r\n      method: 'DELETE',\r\n      headers: this.setHeaders(),\r\n    })\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n      })\r\n  }\r\n\r\n  putLikeCard(data) {\r\n    return fetch(`${this._url}/cards/likes/${data._id}`, {\r\n      method: 'PUT',\r\n      headers: this.setHeaders(),\r\n    })\r\n      .then((res) => {\r\n        if (res.ok) {\r\n          return res.json();\r\n        }\r\n        return Promise.reject(`Ошибка: ${res.status}`);\r\n      })\r\n  }\r\n\r\n  getAllData() {\r\n    return Promise.all([this.getUser(), this.getInitialCards()]);\r\n  }\r\n}\r\n\r\nconst api = new Api({\r\n  url: \"http://localhost:3000\"\r\n  // url: \"https://api.tangom.students.nomoredomains.icu\",\r\n  });\r\n\r\nexport default api;\r\n","const url =\"https://api.tangom.students.nomoredomains.icu\";\r\n\r\nclass Auth {\r\n  constructor(options) {\r\n    this._url = options.url;\r\n  }\r\n\r\n  _handleOriginalResponse(res) {\r\n    if (!res.ok) {\r\n      return Promise.reject(`Error: ${res.status}`);\r\n    }\r\n    return res.json();\r\n  }\r\n\r\n  register(email, password) {\r\n    return fetch(`${this._url}/signup`, {\r\n      method: 'POST',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        password: password,\r\n        email: email\r\n      })\r\n    }).then(this._handleOriginalResponse)\r\n  }\r\n\r\n  authorize(email, password) {\r\n    return fetch(`${this._url}/signin`, {\r\n      method: 'POST',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({\r\n        password: password,\r\n        email: email\r\n      })\r\n    }).then(this._handleOriginalResponse);\r\n  }\r\n\r\n  checkToken(token) {\r\n    return fetch(`${this._url}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Authorization: `Bearer ${token}`\r\n      }\r\n    }).then(this._handleOriginalResponse)\r\n  }\r\n}\r\n\r\nconst auth = new Auth({\r\n  url: \"http://localhost:3000\"\r\n  // url: url\r\n})\r\n\r\nexport default auth;","import React from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport Header from \"./Header\";\nimport { useFormValidation } from \"../hooks/useFormValidation\";\n\nfunction Register({ handleRegistration}) {\n  const history = useHistory();\n  const {values, errors, handleChange} = useFormValidation();\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    handleRegistration(values.email, values.password);\n  }\n\n  return (\n    <>\n      <Header email=\"\" onClick={() => {\n          history.push(\"/sign-in\");\n        }}\n        menuText=\"Войти\"\n      />\n      <div className=\"popup__container popup__container_dark\">\n        <h2 className=\"popup__title popup__title_dark\">Регистрация</h2>\n        <form\n          className=\"popup__form\"\n          name=\"registerForm\"\n          noValidate\n          onSubmit={handleSubmit}\n        >\n          <input\n            className=\"popup__field popup__field_dark popup__field_email\"\n            id=\"email\"\n            type=\"email\"\n            placeholder=\"Email\"\n            name=\"email\"\n            minLength=\"2\"\n            maxLength=\"40\"\n            required\n            value={values.email || ''}\n            onChange={handleChange}\n          />\n          <span\n            className={`popup__form-error ${\n              errors.email && \"popup__form-error_visible\"\n            }`}\n            id=\"email-error\"\n          >\n            {errors.email || ''}\n          </span>\n          <input\n            className=\"popup__field popup__field_dark popup__field_password\"\n            id=\"password\"\n            type=\"password\"\n            placeholder=\"Пароль\"\n            name=\"password\"\n            required\n            value={values.password || ''}\n            onChange={handleChange}\n          />\n          <span\n            className={`popup__form-error ${\n              errors.password && \"popup__form-error_visible\"\n            }`}\n            id=\"password-error\"\n          >\n            {errors.password || ''}\n          </span>\n          <button\n            type=\"submit\"\n            className=\"popup__save popup__save_dark\"\n          >\n            Зарегистрироваться\n          </button>\n        </form>\n        <Link to=\"/sign-in\" className=\"popup__link\">\n          Уже зарегистрированы? Войти\n        </Link>\n      </div>\n    </>\n  );\n}\n\nexport default Register;\n","import React from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Header from \"./Header\";\nimport { useFormValidation } from '../hooks/useFormValidation';\n\nfunction Login({handleAuthorization }) {\n  const history = useHistory();\n  const { values, errors, handleChange} = useFormValidation();\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    handleAuthorization(values.email, values.password);\n  }\n\n  return (\n    <>\n      <Header email=\"\" onClick={() => {\n          history.push(\"/sign-up\");\n        }}\n        menuText=\"Регистрация\"\n      />\n      <div className=\"popup__container popup__container_dark\">\n        <h2 className=\"popup__title popup__title_dark\">Вход</h2>\n        <form\n          className=\"popup__form\"\n          name=\"signForm\"\n          noValidate\n          onSubmit={handleSubmit}\n        >\n          <input\n            className=\"popup__field popup__field_dark popup__field_email\"\n            id=\"email\"\n            type=\"email\"\n            placeholder=\"Email\"\n            name=\"email\"\n            minLength=\"2\"\n            maxLength=\"40\"\n            required\n            value={values.email || ''}\n            onChange={handleChange}\n          />\n          <span\n            className={`popup__form-error ${\n              errors.email && \"popup__form-error_visible\"\n            }`}\n            id=\"email-error\"\n          >\n            {errors.email || ''}\n          </span>\n          <input\n            className=\"popup__field popup__field_dark popup__field_password\"\n            id=\"password\"\n            type=\"password\"\n            placeholder=\"Пароль\"\n            name=\"password\"\n            required\n            value={values.password || ''}\n            onChange={handleChange}\n          />\n          <span\n            className={`popup__form-error ${\n              errors.password && \"popup__form-error_visible\"\n            }`}\n            id=\"password-error\"\n          >\n            {errors.password || ''}\n          </span>\n          <button\n            type=\"submit\"\n            className=\"popup__save popup__save_dark\"\n          >\n            Войти\n          </button>\n        </form>\n      </div>\n    </>\n  );\n}\n\nexport default Login;\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router-dom';\r\n\r\n function ProtectedRoute({component: Component, ...props}) {\r\n  return (\r\n    <Route>\r\n      {\r\n        () => props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />\r\n      }\r\n    </Route>\r\n  );\r\n}\r\n\r\nexport default ProtectedRoute;","export default __webpack_public_path__ + \"static/media/success.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/fail.df8eddf6.svg\";","import React from \"react\";\nimport success from \"../images/success.svg\";\nimport fail from \"../images/fail.svg\";\n\nexport default function InfoTooltip(props) {\n  return (\n    <div className={`popup ${props.isOpen ? \"popup_opened\" : \"\"}`}>\n      <div className=\"popup__container\">\n        <button onClick={props.onClose} type=\"button\" className=\"popup__close\"\n        ></button>\n        <img className=\"popup__icon\" alt=\"icon\" src={`${props.error ? fail : success}`} />\n        <h2 className=\"popup__title\">{props.error ?\n            'Что-то пошло не так! Попробуйте ещё раз.': 'Вы успешно зарегистрировались!'\n        }\n        </h2>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport PopupWithForm from './PopupWithForm';\nimport ImagePopup from './ImagePopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport EditProfilePopup from './EditProfilePopup';\nimport api from '../utils/api';\nimport auth from '../utils/auth';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext';\nimport {Route, Switch, useHistory} from \"react-router-dom\";\nimport Register from './Register';\nimport Login from './Login';\nimport ProtectedRoute from './ProtectedRoute';\nimport InfoTooltip from './InfoTooltip';\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n  const [isInfoTooltipOpen, setIsInfoTooltipOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [isLoading, setIsLoading] = React.useState(true);\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [error, setError] = React.useState(false);\n   const [email, setEmail] = React.useState(\"\");\n  const history = useHistory();\n\n  function handleCardLike(card) {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some(i => i === currentUser._id);\n    // Отправляем запрос в API и получаем обновлённые данные карточки\n    api.changeLikeStatus(card, isLiked).then((newCard) => {\n      // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n      // Обновляем стейт\n      setCards(newCards);\n    })\n      .catch((err) => console.log(err));\n  }\n\n  function handleCardDelete(card) {\n    api.deleteCard(card)\n      .then(() => {\n        const newCards = cards.filter((i) => {\n          return i._id !== card._id;\n        });\n        setCards(newCards);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  }\n\n  React.useEffect(() => {\n    if (loggedIn) {\n      setIsLoading(true);\n      api.getAllData()\n        .then(([profile, cards]) => {\n          setCards(cards);\n          setCurrentUser(profile)\n        })\n        .catch((err) => console.log(err))\n        .finally(() => {\n          setIsLoading(false);\n        });\n    }\n  }, [loggedIn])\n\n  function handleUpdateUser(data) {\n    setIsLoading(true);\n    api.patchProfileEditing(data)\n      .then(\n        (data) => {\n          setCurrentUser(data);\n          closeAllPopups();\n        })\n      .catch((err) => console.log(err))\n      .finally(() => {\n        setIsLoading(false);\n      });\n  }\n\n  function handleUpdateAvatar(data) {\n    setIsLoading(true);\n    api.patchUserAvatar(data)\n      .then(\n        (data) => {\n          setCurrentUser(data);\n          closeAllPopups();\n        })\n      .catch((err) => console.log(err))\n      .finally(() => {\n        setIsLoading(false);\n      });\n  }\n\n  function handleAddPlaceSubmit(data) {\n    setIsLoading(true);\n    api.postAddCard(data)\n      .then(\n        (newCard) => {\n          setCards([newCard, ...cards]);\n          closeAllPopups();\n        })\n      .catch((err) => console.log(err))\n      .finally(() => {\n        setIsLoading(false);\n      });\n  }\n\n  function handleRegistration(email, password) {\n    auth\n      .register(email, password)\n      .then((res) => {\n        if (res) {\n          setError(false);\n          history.push(\"/sign-in\");\n        } else {\n          setError(true);\n        }\n      })\n      .catch((err) => console.log(err));\n    setIsInfoTooltipOpen(true);\n  }\n\n  function handleAuthorization(email, password) {\n    auth\n      .authorize(email, password)\n      .then((res) => {\n        if (res) {\n          setEmail(email)\n          setLoggedIn(true);\n          history.push(\"/\");\n        }\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleEditProfile() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlace() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleEditAvatar() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleCard(card) {\n    setIsImagePopupOpen(true);\n    setSelectedCard(card);\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsImagePopupOpen(false);\n    setIsInfoTooltipOpen(false);\n    setSelectedCard({});\n  }\n\n  function handleSignOut() {\n    setLoggedIn(false);\n    localStorage.removeItem(\"jwt\");\n    history.push(\"/sign-in\");\n  }\n\n  function handleCheckToken() {\n    if (localStorage.getItem(\"jwt\")) {\n      const token = localStorage.getItem(\"jwt\");\n      auth\n        .checkToken(token)\n        .then((res) => {\n          if (res) {\n            setEmail(res.email);\n            setLoggedIn(true);\n            history.push(\"/\");\n          }\n        })\n        .catch((err) => console.log(err));\n    }\n  }\n\n  // React.useEffect(() => {\n  //   const token = localStorage.getItem('jwt');\n  //\n  //   if (token) {\n  //     handleCheckToken();\n  //   }\n  // }, [handleCheckToken])\n\n  React.useEffect(() => {\n       handleCheckToken();\n       // eslint-disable-next-line\n      }, [loggedIn])\n\n   return (\n    <CurrentUserContext.Provider value={currentUser}>\n      {loggedIn && (\n      <Header email={email} onClick={handleSignOut} menuText=\"Выйти\"/>\n      )}\n      <Switch>\n        <ProtectedRoute\n          exact\n          path=\"/\"\n          component={Main}\n          onEditProfile={handleEditProfile}\n          onAddPlace={handleAddPlace}\n          onEditAvatar={handleEditAvatar}\n          onCardClick={handleCard}\n          cards={cards}\n          onCardLike={handleCardLike}\n          onCardDelete={handleCardDelete}\n          isLoading={isLoading}\n          loggedIn={loggedIn}\n        />\n        <Route path=\"/sign-in\">\n          <Login handleAuthorization={handleAuthorization} onCheckToken={handleCheckToken}/>\n        </Route>\n        <Route path=\"/sign-up\">\n          <Register handleRegistration={handleRegistration}/>\n        </Route>\n      </Switch>\n      <Footer/>\n\n      <EditProfilePopup\n        isOpen={isEditProfilePopupOpen}\n        onClose={closeAllPopups}\n        onUpdateUser={handleUpdateUser}\n      />\n\n      <EditAvatarPopup\n        isOpen={isEditAvatarPopupOpen}\n        onClose={closeAllPopups}\n        onUpdateAvatar={handleUpdateAvatar}\n      />\n\n      <AddPlacePopup\n        isOpen={isAddPlacePopupOpen}\n        onClose={closeAllPopups}\n        onAddPlace={handleAddPlaceSubmit}\n      />\n\n      <PopupWithForm\n        name=\"confirm\"\n        title=\"Вы уверены?\"\n        buttonName=\"Да\"\n      />\n\n      <ImagePopup\n        card={selectedCard}\n        isOpen={isImagePopupOpen}\n        onClose={closeAllPopups}\n      />\n\n      <InfoTooltip\n        isOpen={isInfoTooltipOpen}\n        onClose={closeAllPopups}\n        error={error}\n      />\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from \"react-router-dom\";\nimport './index.css';\nimport App from '../src/components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n     <BrowserRouter>\n    <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.querySelector('.root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}